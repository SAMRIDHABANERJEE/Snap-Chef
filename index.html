<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnapChef | Menu & Fridge AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #059669; --bg: #FAFAF9; }
        body { background-color: var(--bg); font-family: 'DM Sans', sans-serif; color: #1C1917; }
        h1, h2, h3, h4 { font-family: 'Playfair Display', serif; }
        
        /* Smooth Fade In */
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Scanning Laser Effect */
        .laser-line {
            position: absolute; width: 100%; height: 4px; background: #34D399;
            box-shadow: 0 0 15px #34D399; top: 0;
            animation: scanMove 2s infinite linear;
        }
        @keyframes scanMove { 0% { top: 0%; } 50% { top: 100%; } 100% { top: 0%; } }

        .hide-scroll::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="w-full px-6 py-4 flex justify-between items-center bg-white/90 backdrop-blur border-b border-stone-200 sticky top-0 z-50">
        <div class="flex items-center gap-2 text-emerald-700">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
            <span class="text-xl font-bold tracking-tight">SnapChef</span>
        </div>
        <div class="text-xs font-bold uppercase tracking-widest text-stone-400">Menu & Fridge Scanner</div>
    </nav>

    <main class="flex-grow container mx-auto px-4 py-10 max-w-4xl">
        
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 text-stone-800">Eat Smarter. Waste Less.</h1>
            <p class="text-stone-600">Analyze your <strong>Fridge Ingredients</strong> or a <strong>Restaurant Menu</strong> instantly.</p>
        </header>

        <!-- STAGE 1: UPLOAD BOX (Visible by Default) -->
        <div id="stage-upload" class="bg-white rounded-3xl shadow-xl border-2 border-dashed border-stone-300 p-12 text-center hover:border-emerald-500 transition-all relative group">
            <!-- The Magic Input: Absolutely positioned to cover the whole div -->
            <input type="file" id="file-uploader" 
                   class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-50" 
                   accept="image/*" 
                   onchange="handleFileUpload(this)">
            
            <div class="pointer-events-none group-hover:scale-105 transition-transform duration-300">
                <div class="bg-emerald-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-5 text-emerald-600">
                    <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                </div>
                <h3 class="text-2xl font-bold text-stone-800">Tap to Scan</h3>
                <p class="text-stone-400 mt-2 font-medium">Take a photo of food or a menu</p>
            </div>
        </div>

        <!-- STAGE 2: SCANNING (Hidden by Default) -->
        <div id="stage-scanning" class="hidden bg-stone-900 rounded-3xl shadow-xl overflow-hidden relative h-96 w-full">
            <img id="preview-img" src="" class="w-full h-full object-cover opacity-60">
            <div class="absolute inset-0 flex flex-col items-center justify-center z-10">
                <div class="laser-line"></div>
                <div class="bg-black/70 backdrop-blur px-6 py-2 rounded-full text-emerald-400 font-mono text-lg animate-pulse border border-emerald-500/30">
                    ANALYZING DATA...
                </div>
            </div>
        </div>

        <!-- STAGE 3: RESULTS (Hidden by Default) -->
        <div id="stage-results" class="hidden mt-8 fade-in">
            
            <!-- AI Insight -->
            <div class="bg-white border-l-4 border-emerald-500 shadow-md p-6 rounded-r-xl mb-8 flex items-start gap-4">
                <div class="bg-emerald-100 p-2 rounded-full text-emerald-700 shrink-0">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                </div>
                <div>
                    <h3 class="font-bold text-stone-800 text-lg">Analysis Complete</h3>
                    <p class="text-stone-600 text-sm mt-1" id="ai-text">
                        <!-- Populated by JS -->
                    </p>
                </div>
            </div>

            <!-- Recipe Grid -->
            <div class="grid md:grid-cols-3 gap-6" id="card-grid">
                <!-- Cards injected here -->
            </div>
            
            <button onclick="resetApp()" class="mt-10 mx-auto block text-stone-400 text-sm hover:text-emerald-600 transition">
                Scan Another Image
            </button>
        </div>

    </main>

    <!-- Modal (Hidden) -->
    <div id="modal-overlay" class="fixed inset-0 z-[100] hidden bg-black/80 backdrop-blur-sm" onclick="closeModal()"></div>
    <div id="modal-content" class="fixed inset-x-0 bottom-0 md:top-10 md:bottom-10 md:left-auto md:right-auto md:w-[600px] md:mx-auto bg-white z-[101] rounded-t-2xl md:rounded-2xl shadow-2xl transform translate-y-full transition-transform duration-300 flex flex-col overflow-hidden">
        <!-- Content injected by JS -->
    </div>

    <!-- JAVASCRIPT -->
    <script>
        // --- DATA ---
        const results = [
            {
                id: 1,
                tag: "FRIDGE HERO",
                title: "Rescue Shakshuka",
                desc: "Uses your wilting spinach and ripe tomatoes perfectly.",
                cal: "320 kcal",
                time: "20 min",
                img: "https://images.unsplash.com/photo-1590412200988-a436970781fa?auto=format&fit=crop&w=800&q=80",
                ingredients: ["Tomatoes", "Spinach", "Eggs", "Onion"],
                steps: ["Sauté onions & garlic.", "Add chopped tomatoes, simmer.", "Add spinach until wilted.", "Crack eggs on top, cover 5 mins."]
            },
            {
                id: 2,
                tag: "MENU PICK",
                title: "Grilled Salmon Power Bowl",
                desc: "The healthiest item on the menu. High protein, good fats.",
                cal: "540 kcal",
                time: "Order",
                img: "https://images.unsplash.com/photo-1467003909585-2f8a7270028d?auto=format&fit=crop&w=800&q=80",
                ingredients: ["Salmon", "Quinoa", "Avocado", "Greens"],
                steps: ["Ask for dressing on the side.", "Request extra lemon.", "Perfectly balanced meal."]
            },
            {
                id: 3,
                tag: "QUICK SNACK",
                title: "Caprese Toast",
                desc: "Simple, fresh, and ready in seconds using your pantry items.",
                cal: "210 kcal",
                time: "5 min",
                img: "https://images.unsplash.com/photo-1529312266912-b33cf6227e24?auto=format&fit=crop&w=800&q=80",
                ingredients: ["Bread", "Tomato", "Mozzarella", "Basil"],
                steps: ["Toast bread until golden.", "Layer slices of tomato and cheese.", "Top with basil and olive oil."]
            }
        ];

        // --- CORE FUNCTIONS ---

        function handleFileUpload(input) {
            if (input.files && input.files[0]) {
                const file = input.files[0];
                const reader = new FileReader();

                reader.onload = function(e) {
                    // 1. Set Preview Image
                    document.getElementById('preview-img').src = e.target.result;

                    // 2. Hide Upload Stage
                    document.getElementById('stage-upload').classList.add('hidden');

                    // 3. Show Scanning Stage
                    document.getElementById('stage-scanning').classList.remove('hidden');

                    // 4. Start Simulation Timer
                    setTimeout(showResults, 3000);
                }
                
                reader.readAsDataURL(file);
            }
        }

        function showResults() {
            // Hide Scanning
            document.getElementById('stage-scanning').classList.add('hidden');
            
            // Show Results
            document.getElementById('stage-results').classList.remove('hidden');
            
            // Set AI Text
            document.getElementById('ai-text').innerHTML = `
                I identified <strong class="text-emerald-700">Tomatoes, Spinach, and Eggs</strong> in the photo. 
                <br>If this is a menu, the <strong class="text-emerald-700">Salmon</strong> is your best bet.
            `;

            // Render Cards
            const grid = document.getElementById('card-grid');
            grid.innerHTML = results.map(item => `
                <div onclick="openModal(${item.id})" class="bg-white border border-stone-200 rounded-2xl overflow-hidden hover:shadow-xl hover:-translate-y-1 transition cursor-pointer group">
                    <div class="h-40 overflow-hidden relative">
                        <img src="${item.img}" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                        <span class="absolute top-2 left-2 bg-white/90 backdrop-blur text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider text-emerald-800">${item.tag}</span>
                    </div>
                    <div class="p-5">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="font-bold text-lg text-stone-800">${item.title}</h3>
                            <span class="text-xs font-bold text-stone-400">${item.time}</span>
                        </div>
                        <p class="text-sm text-stone-500 mb-4">${item.desc}</p>
                        <button class="w-full py-2 rounded-lg bg-stone-50 text-emerald-700 text-sm font-bold hover:bg-emerald-50 transition">View Details</button>
                    </div>
                </div>
            `).join('');
            
            // Smooth Scroll
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function resetApp() {
            location.reload();
        }

        // --- MODAL LOGIC ---

        function openModal(id) {
            const item = results.find(r => r.id === id);
            const modalOverlay = document.getElementById('modal-overlay');
            const modalContent = document.getElementById('modal-content');

            // Build Modal HTML
            modalContent.innerHTML = `
                <div class="h-56 relative shrink-0">
                    <img src="${item.img}" class="w-full h-full object-cover">
                    <button onclick="closeModal()" class="absolute top-4 right-4 bg-black/30 text-white p-2 rounded-full hover:bg-black/50 transition">✕</button>
                    <div class="absolute bottom-4 left-6 text-white drop-shadow-md">
                        <h2 class="text-3xl font-bold font-serif">${item.title}</h2>
                        <span class="text-sm font-medium opacity-90">${item.cal} • ${item.time}</span>
                    </div>
                </div>
                <div class="p-8 overflow-y-auto bg-white flex-grow">
                    <h4 class="font-bold text-stone-800 mb-3 border-l-4 border-emerald-500 pl-3">Components</h4>
                    <ul class="mb-6 grid grid-cols-2 gap-2">
                        ${item.ingredients.map(ing => `<li class="text-stone-600 text-sm flex items-center gap-2"><span class="w-1.5 h-1.5 bg-emerald-400 rounded-full"></span>${ing}</li>`).join('')}
                    </ul>
                    <h4 class="font-bold text-stone-800 mb-3 border-l-4 border-emerald-500 pl-3">Instructions / Notes</h4>
                    <ol class="space-y-3 text-stone-600">
                        ${item.steps.map((step, i) => `<li class="flex gap-3"><span class="font-bold text-stone-300">${i+1}.</span><span>${step}</span></li>`).join('')}
                    </ol>
                </div>
                <div class="p-4 border-t border-stone-100 text-center bg-stone-50">
                    <button onclick="closeModal()" class="bg-emerald-700 text-white font-bold py-3 px-8 rounded-xl shadow hover:bg-emerald-800 transition w-full">Select This Option</button>
                </div>
            `;

            // Show
            modalOverlay.classList.remove('hidden');
            modalContent.classList.remove('hidden');
            
            // Animation Trick
            setTimeout(() => {
                modalContent.classList.remove('translate-y-full');
            }, 10);
            
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modalOverlay = document.getElementById('modal-overlay');
            const modalContent = document.getElementById('modal-content');

            modalContent.classList.add('translate-y-full');
            
            setTimeout(() => {
                modalOverlay.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }, 300);
        }
    </script>
</body>
</html>
